# mtp_glm5 Test Results

**Date:** 2026-02-21 09:06:10 UTC

## Configuration

| Parameter | Value |
|-----------|-------|
| Model | GLM-5 (4-bit quantized) |
| MTP Model | GLM-5-mtp (original HF weights) |
| Mode | Single Node (hwstudio1) |
| Speculative Method | MTP (k=1) |
| KV Cache Quantization | FP8 |
| Note | MTP does NOT support TP mode — silently falls back to normal decoding |

## Single Request

| # | Status | Prompt Tokens | Completion Tokens | TTFT (ms) | Prefill tok/s | Decode tok/s | Total Time (s) |
|---|--------|---------------|-------------------|-----------|---------------|--------------|----------------|
| 1 | PASS | 17 | 8 | 3294.1 | 5.2 | 0.9 | 12.56 |

## Sequential Requests

| # | Status | Prompt Tokens | Completion Tokens | TTFT (ms) | Prefill tok/s | Decode tok/s | Total Time (s) |
|---|--------|---------------|-------------------|-----------|---------------|--------------|----------------|
| 1 | FAIL `URLError: <urlopen error [Errno 61] Connection refused>` | 0 | 0 | 0.0 | 0.0 | 0.0 | 0.05 |
| 2 | FAIL `URLError: <urlopen error [Errno 61] Connection refused>` | 0 | 0 | 0.0 | 0.0 | 0.0 | 0.19 |
| 3 | FAIL `URLError: <urlopen error [Errno 61] Connection refused>` | 0 | 0 | 0.0 | 0.0 | 0.0 | 0.06 |

## Summary

- **Working:** YES
- **Total requests:** 4
- **Successful:** 1
- **Failed:** 3
- **Avg TTFT:** 3294.1 ms
- **Avg prefill tok/s:** 5.2
- **Avg decode tok/s:** 0.9
- **Total output tokens:** 8
- **Avg per-request throughput:** 0.6 tok/s

## Output Samples

### Single Request
```
The capital of France is Paris.
```


## MTP + TP Limitation

MTP (Multi-Token Prediction) does **not** support Tensor Parallel mode. When `--speculative-method mtp` is used with TP, the server silently falls back to normal (non-speculative) decoding. There is no error or warning — the only observable difference is the lack of speedup from speculative decoding.

For this reason, this test runs on **hwstudio1 only** (single node).


## Errors

1. Test 2 FAILED: could not query /v1/status
2. Test 3 request 'reasoning' FAILED: URLError: <urlopen error [Errno 61] Connection refused>
3. Test 3 request 'coding' FAILED: URLError: <urlopen error [Errno 61] Connection refused>
4. Test 3 request 'creative' FAILED: URLError: <urlopen error [Errno 61] Connection refused>

## Server Logs (excerpt)

### hwstudio1

```
(no log available)
```

